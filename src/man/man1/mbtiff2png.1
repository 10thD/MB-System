.TH mbtiff2png 1 "6 June 2021" "MB-System 5.0" "MB-System 5.0"
.SH NAME
\fBmbtiff2png\fP \- Convert GeoTiff images to PNG format images setting no data
regions to be transparent.

.SH VERSION
Version 5.0

.SH SYNOPSIS
mbtiff2png \fB\-\-input=\fP\fIinputGeoTiffFile\fP [\fB\-\-world=\fP\fIinputWorldFile=\fP
\fB\-\-output=\fP\fIoutputPNGFile\fP \fB\-\-transparency\-white\fP
\fB\-\-transparency\-light=\fP\fIthreshold\fP \fB\-\-transparency\-black\fP
\fB\-\-transparency\-dark=\fP\fIthreshold\fP
\fB\-\-verbose\fP \fB\-\-help\fP]

.SH DESCRIPTION
\fBMbtiff2png\fP converts a GeoTiff image generated by the \fBMB-System\fP
\fBGMT\fP module \fBmbgrdtiff\fP or the macro \fBmbm_grdtiff\fP into a PNG format
image. Although GeoTiff images are advantageous with respect to having the associated
geodetic information embedded in the image file, the Tiff standard does not support
transparency and so cannot represent no data regions as transparent when imported
into a GIS. The conversion done by \fBMbtiff2png\fP can include setting no data
regions to be transparent. The
no data regions can be specified as being white, black, or lighter or darker than
a threshold. The threshold is specified as an integer between 0 and 255, where
0 is black and 255 is white. Since the PNG image format does not support embedded
geodetic information, making the output image importable into a GIS
depends on the parallel world file.
ESRI raster world files (e.g. https://en.wikipedia.org/wiki/World_file) are six
line plain text files that define the location, scale, and rotation of a raster
on a map. \fBMbtiff2png\fP simply copies the GeoTiff
world file to be parallel to the output PNG file with a ".pgw" suffix.

.SH MB-SYSTEM AUTHORSHIP
David W. Caress
.br
  Monterey Bay Aquarium Research Institute
.br
Dale N. Chayes
.br
  Center for Coastal and Ocean Mapping
.br
  University of New Hampshire
.br
Christian do Santos Ferreira
.br
  MARUM - Center for Marine Environmental Sciences
.br
  University of Bremen

.SH OPTIONS
.TP
.B \-\-help
This "help" flag cause the program to print out a description
of its operation and then exit immediately.
.TP
.B \-\-input=\fIinputGeoTiffFile\fP
.br
Sets the filename of the input GeoTiff file. This file must have a valid parallel
world file with suffix *.tfw
.TP
.B \-\-world=\fIinputWorldFile\fP
.br
Sets the filename of the input world file. Image world files have the form
.TP
.B \-\-output=\fIoutputPNGFile\fP
.br
Sets the filename of the input GeoTiff file. This file must have a valid parallel
world file with suffix *.tfw
.TP
.B \-\-transparency-white
.br
Input pixels that are white, with BGR values all equal to 255, will be
set transparent in the output PNG image file. The pixel colors are presumed to be
defined by single byte blue, green, and red values with a range of 0 to 255.
.TP
.B \-\-transparency-light=\fIthreshold\fP
.br
Input pixels with BGR average values greater than or equal to \fIthreshold\fP will be
set transparent in the output PNG image file. The \fIthreshold\fP value is an
integer from 0 to 255. The pixel colors are presumed to be
defined by single byte blue, green, and red values with a range of 0 to 255.
The average BGR value is int((blue+green+red)/3).
.TP
.B \-\-transparency-black
.br
Input pixels that are black, with BGR values all equal to 0, will be
set transparent in the output PNG image file. The pixel colors are presumed to be
defined by single byte blue, green, and red values with a range of 0 to 255.
.TP
.B \-\-transparency-dark=\fIthreshold\fP
.br
Input pixels with BGR average values less than or equal to \fIthreshold\fP will be
set transparent in the output PNG image file. The \fIthreshold\fP value is an
integer from 0 to 255. The pixel colors are presumed to be
defined by single byte blue, green, and red values with a range of 0 to 255.
The average BGR value is int((blue+green+red)/3).
.TP
.B \-\-verbose
The \fB\-\-verbose\fP option causes \fBmbtiff2png\fP to print out status messages.

.SH EXAMPLES
Suppose that we have topography in a UTM zone 10 projected grid named OctopusGarden_LASS_MB_Topo_5cm_UTM.grd.
We can use \fBmbm_grdtiff\fP to generate a script named OctopusGarden_LASS_MB_Topo_5cm_UTM_Slope_tiff.cmd
that in turn generates a slope shaded GeoTiff image of the topography:
.br
  mbm_grdtiff -I OctopusGarden_LASS_MB_Topo_5cm_UTM.grd \
              -O OctopusGarden_LASS_MB_Topo_5cm_UTM_Slope \
              -G5 -A0.3 -D0/1 \
              -WOctopusGarden_LASS_Topo.cpt \
              -V
  OctopusGarden_LASS_MB_Topo_5cm_UTM_Slope_tiff.cmd
.br
However, the
no data regions of the grid will be represented with the color white in the GeoTiff
OctopusGarden_LASS_MB_Topo_5cm_UTM_Slope.tif
because the Tiff format does not support transparency. In order to translate the
GeoTiff to the PNG format with the white areas set transparent, use \fBmbtiff2png\fP
as follows:

  mbtiff2png --input=OctopusGarden_LASS_MB_Topo_5cm_UTM_Slope.tif \
              --transparency-white \
              --verbose
.br
Running the example above produced the following output to the shell:

  Wrote output BGRA png image OctopusGarden_LASS_MB_Topo_5cm_UTM_Slope.png
  Copied world file from OctopusGarden_LASS_MB_Topo_5cm_UTM_Slope.tfw to OctopusGarden_LASS_MB_Topo_5cm_UTM_Slope.pgw

.SH SEE ALSO
\fBmbsystem\fP(1), \fBmbgrid\fP(1),
\fBmbmosaic\fP(1), \fBmbm_arc2grd\fP(1), \fBmbm_grid\fP(1)

.SH BUGS
Maybe. Maybe not.
